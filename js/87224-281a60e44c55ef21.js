"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87224],{36872:function(e,t,n){n(93981);var r=n(24201),s=n(29541);t.Z=function(e){var t=e.className,n=e.width,o=void 0===n?20:n,i=e.height,a=void 0===i?20:i;return(0,s.jsx)("div",{className:(0,r.cn)("flex items-center justify-center rounded-full",t),style:{width:o,height:a},children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",children:[(0,s.jsxs)("radialGradient",{id:"a10",cx:".66",fx:".66",cy:".3125",fy:".3125",gradientTransform:"scale(1.5)",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#00BCF0"}),(0,s.jsx)("stop",{offset:".3",stopColor:"#00BCF0",stopOpacity:".9"}),(0,s.jsx)("stop",{offset:".6",stopColor:"#00BCF0",stopOpacity:".6"}),(0,s.jsx)("stop",{offset:".8",stopColor:"#00BCF0",stopOpacity:".3"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#00BCF0",stopOpacity:"0"})]}),(0,s.jsx)("circle",{"transform-origin":"center",fill:"none",stroke:"url(#a10)",strokeWidth:"24",strokeLinecap:"round",strokeDasharray:"200 1000",strokeDashoffset:"0",cx:"100",cy:"100",r:"70",children:(0,s.jsx)("animateTransform",{type:"rotate",attributeName:"transform",calcMode:"spline",dur:"2",values:"360;0",keyTimes:"0;1",keySplines:"0 0 1 1",repeatCount:"indefinite"})}),(0,s.jsx)("circle",{"transform-origin":"center",fill:"none",opacity:".2",stroke:"#00BCF0",strokeWidth:"24",strokeLinecap:"round",cx:"100",cy:"100",r:"70"})]})})}},39860:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(27195),s=n(8857),o=n.n(s),i=n(45009);function a(){return(0,i.a)(["lst-apy"],(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://worker.jup.ag/lst-apys");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),{retry:3,keepPreviousData:!0,staleTime:3e5})}},7842:function(e,t,n){n.d(t,{ZP:function(){return K},au:function(){return V}});var r=n(63956),s=n(27195),o=n(70107),i=n(8857),a=n.n(i),c=n(8473),u=n(4707),l=n(93981),d=n(19240),f=n(14218),p=n(24201),h=n(72215),m=n(50882),v=n(25546),x=function(e){var t,n=e.items,r=e.defaultIndex,s=void 0===r?0:r,o=e.key,i=e.autoPaginateContainerId,a=void 0===i?"":i,c=(0,l.useState)(-1),u=c[0],d=c[1],f=(0,l.useRef)([]),p=(null===(t=document.getElementById(a))||void 0===t?void 0:t.getBoundingClientRect())||0,h=(0,l.useState)(!1),m=h[0],x=h[1];(0,l.useEffect)((function(){n.length>0&&setTimeout((function(){d(s)}),100)}),[o||n]);var y=(0,l.useCallback)((function(e){("ArrowUp"===e.code||"Tab"===e.code&&!0===e.shiftKey)&&(e.preventDefault(),x(!0),d((function(e){if(e>0){var t;if(a&&f.current[u]&&null!==(t=f.current[u].current)&&void 0!==t&&t.scrollIntoView){var n=f.current[e-1].current.offsetTop;n+50<p.height&&(document.getElementById("search-result-list").scrollTop=n-p.top)}return e-1}return-1}))),("ArrowDown"===e.code||"Tab"===e.code&&!0!==e.shiftKey)&&(e.preventDefault(),x(!0),d((function(e){if(e>=-1&&e<n.length-1){var t;if(a&&f.current[u]&&null!==(t=f.current[u].current)&&void 0!==t&&t.scrollIntoView){var r=f.current[e+1].current.offsetTop;r+50>p.height&&(document.getElementById("search-result-list").scrollTop=r)}return e+1}return e})))}),[u,n,a,p.height,p.top]);(0,v._1)("keydown",y);var g=(0,l.useCallback)((function(e){d(e),x(!1)}),[d]);return{itemsRef:f,keyboardIndex:u,setFocusIndex:g,isKeyboard:m}},y=n(59978),g=n(11261),b=n(25224),w=n(13838),C=n(13170),j=n(40558),k=n(7744),O=n(57987),Z=n(91348),M=n.n(Z),T=n(85948),B=n(11421),I=n(70006),S=n(36872),P=n(39860),E=n(29541);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=52,A=109,F=function(e){var t=[_,A,e*g.x,8].reduce((function(e,t){return e+t}),0);return Math.min(window.innerHeight-32,t)},L=(0,l.memo)((function(e){var t=e.data,n=e.index,r=e.style,s=t.searchResult[n],o=s.address===C.RD;return(0,E.jsx)(g.Z,{item:s,index:n,style:r,onSubmit:t.onSubmit,keyboardRefs:t.itemsRef,isKeyboardFocused:n===t.keyboardIndex,onMouseEnter:function(){t.setFocusIndex(n)},suppressCloseModal:t.suppressCloseModal,usdValue:t.mintToUsdValue.get(s.address),isLST:o,apy:t.apy},s.address)}),f.wy),R=function(e){var t=e.tokenInfo,n=e.onClick,r=e.mintsList,s=e.miniMode,o=(0,l.useMemo)((function(){return!r.find((function(e){return t.address===e}))}),[t,r]);return o&&(j.Z,o&&c.cC,(0,p.cn)("flex items-center gap-x-2 rounded-full border border-v2-lily/5 px-2 py-1 font-semibold hover:bg-v2-lily/10",{"cursor-not-allowed opacity-30":o}),y.Z,!1===s&&t.symbol),(0,E.jsxs)("button",{type:"button",onClick:n,className:(0,p.cn)("flex items-center gap-x-2 rounded-full border border-v2-lily/5 px-2 py-1 font-semibold hover:bg-v2-lily/10"),translate:"no",children:[(0,E.jsx)(y.Z,{width:24,height:24,info:t}),!1===s&&(0,E.jsx)("span",{className:"text-xxs",children:t.symbol})]})},V=function(){var e=(0,h.Bn)().getTokenInfo,t=(0,h.gZ)(),n=t.userAccounts,r=t.nativeAccount,o=t.isFetching,i=(0,h.y6)().tokenPriceMap,c=(0,h.jB)().useWSol,u=(0,l.useRef)(new Map),d=(0,l.useRef)(new Map);(0,l.useEffect)((function(){if(n.filter((function(e){return e.info.amount.gtn(0)})).forEach((function(t){var n,s=t.info.mint.toString(),o=e(s);if(o){var a=(0,v.lt)(t.info.amount,o.decimals);s===C.W4.toBase58()&&!c&&r&&(a+=(0,v.lt)(r.info.amount,o.decimals)),u.current.set(t.info.mint.toString(),a);var l=null===(n=i[s])||void 0===n?void 0:n.usd;if(l){var f=new w.Z(a).mul(l);f.greaterThan(0)&&d.current.set(s,f)}}}),new Map),!c&&r){var t,s=(0,v.lt)(r.info.amount,9);u.current.set(C.W4.toBase58(),s);var o=null===(t=i[C.W4.toBase58()])||void 0===t?void 0:t.usd;if(o){var a=new w.Z(s).mul(o);a.greaterThan(0)&&d.current.set(C.W4.toBase58(),a)}}}),[e,r,i,c,n,o]);var f=(0,l.useCallback)(function(){var e=(0,s.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=new Map;return t.forEach((function(t){e.has(t.address)||e.set(t.address,t)})),Array.from(e.values())}(),r=n.sort((function(e,t){var n=d.current.get(e.address),r=d.current.get(t.address);if(n&&r)return r.cmp(n);if(n&&!r)return-1;if(!n&&r)return 1;var s=u.current.get(e.address),o=u.current.get(t.address);if(s&&o)return new w.Z(o).cmp(s);if(s&&!o)return-1;if(!s&&o)return 1;var i=0,a=0,c=e.daily_volume||0,l=t.daily_volume||0;return c>l&&(i+=1),l>c&&(a+=1),(0,b.tr)(e)&&(i-=2),(0,b.tr)(t)&&(a-=2),a-i})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return{sortTokenListByBalance:f,mintToUsdValue:d.current}},W=[C.W4.toString(),C.cq.toString(),C.IL.toString()],K=function(e){var t=e.onSubmit,n=e.mintsList,r=e.onClose,i=e.suppressCloseModal,v=e.customStyle,y=e.bestTokens,w=(0,h.gZ)(),C=w.fetchAllAccounts,j=w.isInitialLoading,Z=(0,h.Bn)().typesenseInstantsearchAdapter,N=(0,h.Bn)(),A=N.tokenMap,K=N.unknownTokenMap,U=N.topTokenByVolume,q=N.connection,z=N.addOnchainTokenInfo,G=N.onChainTokenMap,H=(0,P.A)().data;(0,l.useEffect)((function(){C()}),[]);var J=(0,I.JT)().closeModal,Q=(0,O.D)(function(){var e=(0,s.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){try{return Boolean(new k.PublicKey(t))}catch(e){return!1}}(),e.next=3,Z.typesenseClient.multiSearch.perform({searches:n||t.length>30?[{collection:"tokens",q:t,query_by:"address",filter_by:"address:".concat(t),per_page:50}]:[{collection:"tokens",q:t,query_by:"symbol,name,address",sort_by:h.mb.sort_by,per_page:50}]});case 3:return r=e.sent,e.abrupt("return",r.results[0].hits.map((function(e){return e.document})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=Q.mutateAsync,Y=Q.isLoading,$=V(),ee=$.sortTokenListByBalance,te=$.mintToUsdValue,ne=(0,l.useState)([]),re=ne[0],se=ne[1],oe=(0,l.useCallback)(M()(function(){var e=(0,s.Z)(a().mark((function e(t){var n,r,s,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&!(t.length<=2)){e.next=8;break}return e.t0=se,e.next=5,ee([].concat((0,o.Z)(A.values()),(0,o.Z)(K.values()),(0,o.Z)(G.values())));case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 8:if(!(n=A.get(t))){e.next=12;break}return se([n]),e.abrupt("return");case 12:return e.next=14,X(t);case 14:if(!((r=e.sent).length>0)){e.next=23;break}return s=r.map((function(e){return D(D({},e),{},{name:(0,b.a4)(e.name),symbol:(0,b.cv)(e.symbol)})})),e.t2=se,e.next=20,ee(s);case 20:return e.t3=e.sent,(0,e.t2)(e.t3),e.abrupt("return");case 23:return e.next=25,(0,b.zL)(q,[t]);case 25:i=e.sent,(c=i.get(t))&&(se((function(e){var t=new Map;return t.set(c.address,c),e.forEach((function(e){return t.set(e.address,e)})),Array.from(t.values())})),z(c)),e.next=34;break;case 30:e.prev=30,e.t4=e.catch(0),console.log(e.t4),(0,B.Kz)(T.U7,{error:String(e.t4)});case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t){return e.apply(this,arguments)}}(),200),[]),ie=(0,l.useCallback)((function(e){se([]),oe(e.target.value)}),[oe]),ae=x({items:re||[],defaultIndex:0,key:re.toString()}),ce=ae.itemsRef,ue=ae.keyboardIndex,le=ae.setFocusIndex,de=ae.isKeyboard,fe=(0,l.createRef)();(0,l.useEffect)((function(){var e;!0===de&&(null===fe||void 0===fe||null===(e=fe.current)||void 0===e||e.scrollToItem(ue))}),[de,ue,fe]),(0,l.useEffect)((function(){oe("")}),[oe]);var pe=(0,b.Gc)(),he=(0,l.useMemo)((function(){var e=Math.ceil(window.innerHeight/g.x-5);return Math.max(4,Math.min(e,10))}),[pe]);return(0,E.jsxs)("div",{className:"relative flex h-full w-full flex-col overflow-hidden rounded-lg bg-v2-background text-left",style:D({height:F(he),width:"90vw",maxWidth:448},v),children:[(0,E.jsxs)("div",{className:"flex p-2",style:{height:_,maxHeight:_},children:[(0,E.jsx)("div",{className:"ml-1 flex h-full w-5 items-center justify-center",children:Y?(0,E.jsx)(S.Z,{className:"!h-5 !w-5"}):(0,E.jsx)(m.Z,{width:14,height:14})}),(0,E.jsx)("input",{autoComplete:"off",autoFocus:!0,className:"ml-2 w-[70%] truncate bg-transparent text-sm outline-none placeholder:text-xs placeholder:text-v2-lily/30",placeholder:u.ag._({id:"zVlBJ4"}),onChange:function(e){return ie(e)}}),(0,E.jsx)("div",{className:"absolute right-3 top-3 cursor-pointer rounded bg-v2-background-dark p-1.5 text-xs text-v2-lily/50 focus:bg-red-100",onClick:null!==r&&void 0!==r?r:J,children:"Esc"})]}),(0,E.jsx)("div",{className:"hidden flex-wrap gap-2 p-2 md:flex",children:U.length>0&&U.slice(0,6).map((function(e,r){return(0,E.jsx)(R,{tokenInfo:e,onClick:function(){t(e)},mintsList:n,miniMode:W.includes(e.address)},r)}))}),(0,E.jsx)("div",{className:"flex flex-wrap gap-1 px-2 md:hidden lg:gap-2",children:U.length>0&&U.slice(0,5).map((function(e,r){return(0,E.jsx)(R,{tokenInfo:e,onClick:function(){t(e)},mintsList:n,miniMode:W.includes(e.address)},r)}))}),(0,E.jsx)("div",{className:"pt-3 lg:pt-0",style:{flexGrow:1},children:re.length>0&&(0,E.jsx)(d.ZP,{children:function(e){var n=e.height,r=void 0===n?0:n,s=e.width,o=void 0===s?0:s;return(0,E.jsx)(f.t7,{ref:fe,height:r,itemCount:re.length,itemSize:g.x,width:o-2,itemData:{mintToUsdValue:te,searchResult:re,onSubmit:t,itemsRef:ce,keyboardIndex:ue,setFocusIndex:le,suppressCloseModal:i,bestTokens:y,apy:H},className:(0,p.cn)("webkit-scrollbar min-h-[12rem] overflow-y-scroll px-5"),children:L})}})}),(0,E.jsxs)("div",{className:(0,p.cn)("flex items-center justify-center gap-x-2 overflow-hidden text-xs font-semibold text-v2-lily transition-all",j?"max-h-8 p-2":"max-h-0 p-0"),children:[(0,E.jsx)(S.Z,{}),(0,E.jsx)(c.cC,{id:"G6etJA"})]})]})}},50269:function(e,t,n){var r=n(63956),s=n(54423),o=(n(93981),n(29541)),i=["width","height"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.width,n=void 0===t?12:t,r=e.height,a=void 0===r?12:r,u=(0,s.Z)(e,i);return(0,o.jsxs)("svg",c(c({width:n,height:a},u),{},{viewBox:"0 0 12 12",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M6.83337 3.56012C6.83337 4.02043 6.46024 4.39309 5.99994 4.39309C5.53963 4.39309 5.1665 4.02043 5.1665 3.56012C5.1665 3.09981 5.53963 2.72668 5.99994 2.72668C6.46024 2.72668 6.83337 3.09981 6.83337 3.56012Z",fill:"inherit"}),(0,o.jsx)("path",{d:"M6.69319 5.84293V8.58985C6.69319 8.97282 6.38288 9.28313 5.99992 9.28313C5.61695 9.28313 5.30664 8.97282 5.30664 8.58985V5.84293C5.30664 5.46043 5.61695 5.14966 5.99992 5.14966C6.38288 5.14966 6.69319 5.46043 6.69319 5.84293Z",fill:"inherit"}),(0,o.jsx)("path",{d:"M6 0C2.68644 0 0 2.68644 0 6C0 9.31356 2.68644 12 6 12C9.31356 12 12 9.31356 12 6C12 2.68644 9.31356 0 6 0ZM9.4884 9.4884C8.5659 10.4264 7.3068 10.9574 5.991 10.9631C4.67568 10.9687 3.41196 10.4484 2.48196 9.51792C1.55149 8.58792 1.03116 7.3242 1.0368 6.00888C1.04243 4.69308 1.57352 3.43404 2.51148 2.51148C3.43398 1.57351 4.69308 1.04244 6.00888 1.0368C7.3242 1.03118 8.58792 1.55149 9.51792 2.48196C10.4484 3.41196 10.9687 4.67568 10.9631 5.991C10.9575 7.3068 10.4264 8.56584 9.4884 9.4884Z",fill:"inherit"}),(0,o.jsx)("path",{d:"M6 0C2.68644 0 0 2.68644 0 6C0 9.31356 2.68644 12 6 12C9.31356 12 12 9.31356 12 6C12 2.68644 9.31356 0 6 0ZM9.4884 9.4884C8.5659 10.4264 7.3068 10.9574 5.991 10.9631C4.67568 10.9687 3.41196 10.4484 2.48196 9.51792C1.55149 8.58792 1.03116 7.3242 1.0368 6.00888C1.04243 4.69308 1.57352 3.43404 2.51148 2.51148C3.43398 1.57351 4.69308 1.04244 6.00888 1.0368C7.3242 1.03118 8.58792 1.55149 9.51792 2.48196C10.4484 3.41196 10.9687 4.67568 10.9631 5.991C10.9575 7.3068 10.4264 8.56584 9.4884 9.4884Z",fill:"inherit"})]}))}}}]);
//# sourceMappingURL=87224-281a60e44c55ef21.js.map